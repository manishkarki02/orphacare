generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}


enum Role {
  ADMIN
  USER
}

enum Caste {
  Brahmin
  Kshatriya
  Vaishya
  Sudra
}

enum Province {
  Koshi
  Madhesh
  Bagmati
  Gandaki
  Lumbini
  Karnali
  SudurPachim
}

enum Gender {
  Male
  Female
  Other
}

enum DonationType {
  Food
  Cloth
  Books
  Money
}

model User {
  id            String            @id @default(uuid())
  name          String
  address       String
  email         String            @unique
  phone         String            @unique
  password      String
  createdAt     DateTime          @default(now())
  missingReport MissingReport[]
  donation      Donation[]
  role          Role
  adoptedKid    KidsForAdoption[]
  adoptionReq   AdoptionRequest[]
}

model MissingReport {
  id                   String   @id @default(uuid())
  name                 String?
  lastSeenAddress      String
  lastSeenTime         DateTime
  age                  Int
  remarks              String?
  longitude            Int
  latitude             Int
  image                String?
  reporterId           String
  reporter             User     @relation(fields: [reporterId], references: [id])
}

model Donation {
  id           String       @id @default(uuid())
  weight       Decimal?     @db.Decimal(10,2)
  amount       Decimal?     @db.Decimal(10,2)
  type         DonationType
  donorId      String
  donor        User         @relation(fields: [donorId], references: [id])
}

model Volunteer {
  id      String  @id @default(uuid())
  name    String
  age     Int
  picture String?
}

model KidsForAdoption {
  id          String            @id @default(uuid())
  picture     String?
  name        String
  surname     String
  age         Int
  caste       Caste
  gender      Gender
  province    Province
  description String
  adoptionReq AdoptionRequest[]
  isAdopted   Boolean           @default(false)
  adopterId   String?
  adopter     User?             @relation(fields: [adopterId], references: [id])
}

model AdoptionRequest {
  kidId     String
  kid       KidsForAdoption @relation(fields: [kidId], references: [id])
  adopterId String
  adopter   User            @relation(fields: [adopterId], references: [id])

  @@id([kidId, adopterId])
}
